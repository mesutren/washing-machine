; generated by ARM C/C++ Compiler, 5.03 [Build 76]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o.\flash\obj\bsp_pulse.o --asm_dir=.\Flash\List\ --list_dir=.\Flash\List\ --depend=.\flash\obj\bsp_pulse.d --cpu=Cortex-M4.fp --apcs=interwork -O0 --diag_suppress=870 -I..\..\Libraries\CMSIS\Include -I..\..\Libraries\CMSIS\Device\ST\STM32F4xx\Include -I..\..\Libraries\STM32F4xx_StdPeriph_Driver\inc -I..\..\User\bsp_stm32f4xx\inc -I..\..\User\bsp_stm32f4xx -I..\..\User -I..\..\RL-ARM\Driver -I..\..\RL-ARM\Config -I..\..\RL-ARM\RL-RTX\inc -D__MICROLIB -DUSE_STDPERIPH_DRIVER -DSTM32F40XX --omf_browse=.\flash\obj\bsp_pulse.crf ..\..\User\bsp_pulse.c]
                          THUMB

                          AREA ||i.EXTI9_5_IRQHandler||, CODE, READONLY, ALIGN=2

                  EXTI9_5_IRQHandler PROC
;;;95     
;;;96     void EXTI9_5_IRQHandler(void)
000000  b510              PUSH     {r4,lr}
;;;97     {
;;;98     		if(EXTI_GetITStatus(EXTI_Line8) != RESET) 
000002  f44f7080          MOV      r0,#0x100
000006  f7fffffe          BL       EXTI_GetITStatus
00000a  b190              CBZ      r0,|L1.50|
;;;99     			{ 
;;;100    				
;;;101    				static int32_t time2 = 0;
;;;102    				//EXTI->IMR&=~(1<<8); 
;;;103    				time2 = bsp_GetRunTime();
00000c  f7fffffe          BL       bsp_GetRunTime
000010  4908              LDR      r1,|L1.52|
000012  6008              STR      r0,[r1,#0]  ; time2
;;;104    				time = time2 - time1;
000014  4608              MOV      r0,r1
000016  6800              LDR      r0,[r0,#0]  ; time2
000018  4907              LDR      r1,|L1.56|
00001a  6809              LDR      r1,[r1,#0]  ; time1
00001c  1a40              SUBS     r0,r0,r1
00001e  4907              LDR      r1,|L1.60|
000020  6008              STR      r0,[r1,#0]  ; time
;;;105    				time1 = time2;
000022  4804              LDR      r0,|L1.52|
000024  6800              LDR      r0,[r0,#0]  ; time2
000026  4904              LDR      r1,|L1.56|
000028  6008              STR      r0,[r1,#0]  ; time1
;;;106    				EXTI_ClearITPendingBit(EXTI_Line8);
00002a  f44f7080          MOV      r0,#0x100
00002e  f7fffffe          BL       EXTI_ClearITPendingBit
                  |L1.50|
;;;107    				//ENABLE_INT();
;;;108    			}
;;;109    }
000032  bd10              POP      {r4,pc}
                          ENDP

                  |L1.52|
                          DCD      time2
                  |L1.56|
                          DCD      time1
                  |L1.60|
                          DCD      time

                          AREA ||i.EXTI_PI8_Config||, CODE, READONLY, ALIGN=2

                  EXTI_PI8_Config PROC
;;;61     
;;;62     void EXTI_PI8_Config(void)
000000  b51f              PUSH     {r0-r4,lr}
;;;63     {
;;;64     	
;;;65       GPIO_InitTypeDef GPIO_InitStructure;
;;;66       EXTI_InitTypeDef EXTI_InitStructure;  
;;;67     
;;;68     	time = 0;
000002  2000              MOVS     r0,#0
000004  4918              LDR      r1,|L2.104|
000006  6008              STR      r0,[r1,#0]  ; time
;;;69     	time1 = 0;
000008  4918              LDR      r1,|L2.108|
00000a  6008              STR      r0,[r1,#0]  ; time1
;;;70     
;;;71     	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOI, ENABLE);
00000c  2101              MOVS     r1,#1
00000e  0208              LSLS     r0,r1,#8
000010  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;72       //NVIC
;;;73       
;;;74       //?????
;;;75     	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN;		/* 设为输入口 */
000014  2000              MOVS     r0,#0
000016  f88d000c          STRB     r0,[sp,#0xc]
;;;76     	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;		/* 设为推挽模式 */
00001a  f88d000e          STRB     r0,[sp,#0xe]
;;;77     	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;	/* 无需上下拉电阻 */
00001e  f88d000f          STRB     r0,[sp,#0xf]
;;;78     	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
000022  2002              MOVS     r0,#2
000024  f88d000d          STRB     r0,[sp,#0xd]
;;;79     	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8;
000028  01c0              LSLS     r0,r0,#7
00002a  9002              STR      r0,[sp,#8]
;;;80       GPIO_Init(GPIOI,&GPIO_InitStructure);
00002c  a902              ADD      r1,sp,#8
00002e  4810              LDR      r0,|L2.112|
000030  f7fffffe          BL       GPIO_Init
;;;81       
;;;82      	RCC_APB2PeriphClockCmd(RCC_APB2Periph_SYSCFG, ENABLE);
000034  2101              MOVS     r1,#1
000036  0388              LSLS     r0,r1,#14
000038  f7fffffe          BL       RCC_APB2PeriphClockCmd
;;;83       //?????????
;;;84       //GPIO_EXTILineConfig(GPIO_PortSourceGPIOC, GPIO_PinSource2);
;;;85     	SYSCFG_EXTILineConfig(EXTI_PortSourceGPIOI, EXTI_PinSource8);
00003c  2108              MOVS     r1,#8
00003e  4608              MOV      r0,r1
000040  f7fffffe          BL       SYSCFG_EXTILineConfig
;;;86     	
;;;87       EXTI_InitStructure.EXTI_Line = EXTI_Line8;
000044  f44f7080          MOV      r0,#0x100
000048  9000              STR      r0,[sp,#0]
;;;88       EXTI_InitStructure.EXTI_Mode = EXTI_Mode_Interrupt;
00004a  2000              MOVS     r0,#0
00004c  f88d0004          STRB     r0,[sp,#4]
;;;89       EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Falling;
000050  200c              MOVS     r0,#0xc
000052  f88d0005          STRB     r0,[sp,#5]
;;;90       EXTI_InitStructure.EXTI_LineCmd = ENABLE;
000056  2001              MOVS     r0,#1
000058  f88d0006          STRB     r0,[sp,#6]
;;;91       EXTI_Init(&EXTI_InitStructure);
00005c  4668              MOV      r0,sp
00005e  f7fffffe          BL       EXTI_Init
;;;92     	
;;;93     	NVIC_Configuration();
000062  f7fffffe          BL       NVIC_Configuration
;;;94     }
000066  bd1f              POP      {r0-r4,pc}
;;;95     
                          ENDP

                  |L2.104|
                          DCD      time
                  |L2.108|
                          DCD      time1
                  |L2.112|
                          DCD      0x40022000

                          AREA ||i.NVIC_Configuration||, CODE, READONLY, ALIGN=1

                  NVIC_Configuration PROC
;;;44     
;;;45     static void NVIC_Configuration(void)
000000  b508              PUSH     {r3,lr}
;;;46     {
;;;47       NVIC_InitTypeDef NVIC_InitStructure;
;;;48       
;;;49       
;;;50       NVIC_PriorityGroupConfig(NVIC_PriorityGroup_1);
000002  f44f60c0          MOV      r0,#0x600
000006  f7fffffe          BL       NVIC_PriorityGroupConfig
;;;51       
;;;52       
;;;53       NVIC_InitStructure.NVIC_IRQChannel = EXTI9_5_IRQn;
00000a  2017              MOVS     r0,#0x17
00000c  f88d0000          STRB     r0,[sp,#0]
;;;54       NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;
000010  2000              MOVS     r0,#0
000012  f88d0001          STRB     r0,[sp,#1]
;;;55       NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
000016  f88d0002          STRB     r0,[sp,#2]
;;;56       NVIC_InitStructure.NVIC_IRQChannelCmd =ENABLE;
00001a  2001              MOVS     r0,#1
00001c  f88d0003          STRB     r0,[sp,#3]
;;;57       NVIC_Init(&NVIC_InitStructure);
000020  4668              MOV      r0,sp
000022  f7fffffe          BL       NVIC_Init
;;;58     }
000026  bd08              POP      {r3,pc}
;;;59     
                          ENDP


                          AREA ||.data||, DATA, ALIGN=2

                  time2
                          DCD      0x00000000
                  time1
                          DCD      0x00000000
                  time
                          DCD      0x00000000

;*** Start embedded assembler ***

#line 1 "..\\..\\User\\bsp_pulse.c"
	AREA ||.rev16_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___11_bsp_pulse_c_9f3683b5____REV16|
#line 129 "..\\..\\Libraries\\CMSIS\\Include\\core_cmInstr.h"
|__asm___11_bsp_pulse_c_9f3683b5____REV16| PROC
#line 130

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE, READONLY
	THUMB
	EXPORT |__asm___11_bsp_pulse_c_9f3683b5____REVSH|
#line 144
|__asm___11_bsp_pulse_c_9f3683b5____REVSH| PROC
#line 145

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
